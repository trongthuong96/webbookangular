import './polyfills.server.mjs';
import{a as K}from"./chunk-JPZQLIH2.mjs";import{b as z,e as N,f as R}from"./chunk-HQYNDQNM.mjs";import"./chunk-VUEOVKYK.mjs";import{f as A,g as D}from"./chunk-7AC3BAJT.mjs";import{l as j,m as F,p as P}from"./chunk-YX3MXE65.mjs";import{$ as S,Aa as M,Ma as l,Na as g,T as y,Va as u,Y as h,Z as _,Za as v,_ as k,_a as b,cb as i,db as r,eb as p,hb as T,jb as m,kb as d,la as L,nb as c,oa as I,pb as E,qb as V,ub as B,wb as H,xb as x}from"./chunk-KICQ2XIQ.mjs";import"./chunk-FME56UVT.mjs";function O(o,s){o&1&&(i(0,"div",2)(1,"div",3)(2,"span",4),c(3,"Loading..."),r()()())}function W(o,s){o&1&&(i(0,"div",2)(1,"div",3)(2,"span",4),c(3,"Loading..."),r()()())}function q(o,s){if(o&1&&p(0,"div",25),o&2){let t=d(2);u("innerHTML",t.safeHtml,M)}}var J=o=>["/truyen",o],f=(o,s)=>["/truyen",o,s];function Q(o,s){if(o&1){let t=T();i(0,"div",5),m("keydown",function(e){h(t);let a=d();return _(a.onKeyDown(e))}),i(1,"a",6)(2,"h1",7),c(3),r()(),i(4,"a",8)(5,"h4",9),c(6),r()(),p(7,"hr",10),i(8,"div",11)(9,"div",12)(10,"a",13),m("click",function(){h(t);let e=d();return _(e.reLoadPage())}),i(11,"span"),c(12,"Ch\u01B0\u01A1ng"),r(),c(13,"tr\u01B0\u1EDBc"),r(),i(14,"button",14),m("click",function(){h(t);let e=d();return _(e.menuButton())}),i(15,"span"),k(),i(16,"svg",15),p(17,"path",16),r()()(),S(),i(18,"div",17),p(19,"a",18)(20,"ul",19),r(),i(21,"a",20),m("click",function(){h(t);let e=d();return _(e.reLoadPage())}),i(22,"span"),c(23,"Ch\u01B0\u01A1ng"),r(),c(24,"ti\u1EBFp"),r()()(),p(25,"hr",21),v(26,W,4,0,"div",0),i(27,"div",22),v(28,q,1,1,"div",23),p(29,"hr",10),i(30,"div",11)(31,"div",12)(32,"a",24),m("click",function(){h(t);let e=d();return _(e.reLoadPage())}),i(33,"span"),c(34,"Ch\u01B0\u01A1ng"),r(),c(35,"tr\u01B0\u1EDBc"),r(),i(36,"button",14),m("click",function(){h(t);let e=d();return _(e.menuButton())}),i(37,"span"),k(),i(38,"svg",15),p(39,"path",16),r()()(),S(),i(40,"div",17),p(41,"a",18)(42,"ul",19),r(),i(43,"a",20),m("click",function(){h(t);let e=d();return _(e.reLoadPage())}),i(44,"span"),c(45,"Ch\u01B0\u01A1ng"),r(),c(46,"ti\u1EBFp"),r()()(),p(47,"hr",21),r()()}if(o&2){let t=d();l(1),u("routerLink",H(10,J,t.bookSlug)),l(2),E(" ",t.chapterModel.bookTitle," "),l(3),V("Ch\u01B0\u01A1ng ",t.chapterModel.chapNumber,": ",t.chapterModel.title,"!"),l(4),u("routerLink",x(12,f,t.bookSlug,t.chapterIndex-1)),l(11),u("routerLink",x(15,f,t.bookSlug,t.chapterIndex+1)),l(5),b(26,t.checkLoadingSpin?26:-1),l(2),u("ngIf",!t.checkLoadingSpin),l(4),u("routerLink",x(18,f,t.bookSlug,t.chapterIndex-1)),l(11),u("routerLink",x(21,f,t.bookSlug,t.chapterIndex+1))}}var ae=(()=>{let s=class s{constructor(n,e,a,w,C,G){this.chapterService=n,this.route=e,this.sanitizer=a,this.router=w,this.titleService=C,this.platformId=G,this.checkLoadingSpin=!0}ngOnInit(){this.route.paramMap.subscribe(n=>{this.checkLoadingSpin=!0,this.bookSlug=n.get("slug")?.toString();let e=parseInt(n.get("chapterIndex"));isNaN(e)||(this.chapterIndex=e),this.getChapterMeTruyenCV(this.bookSlug,this.chapterIndex)})}getChapterMeTruyenCV(n,e){this.chapterService.getChapterMeTruyenCV(n,e).subscribe(a=>{this.chapterModel=a,this.safeHtml=this.sanitizer.bypassSecurityTrustHtml(this.chapterModel.content),this.checkLoadingSpin=!1,this.titleService.setTitle("Ch\u01B0\u01A1ng "+a.chapNumber+": "+a.title)},a=>{this.router.navigate(["/truyen",n])})}onKeyDown(n){this.route.paramMap.subscribe(e=>{this.bookSlug=e.get("slug")?.toString();let a=parseInt(e.get("chapterIndex"));isNaN(a)||(this.chapterIndex=a)}),n.key==="ArrowLeft"?(this.reLoadPage(),this.router.navigate(["/truyen",this.bookSlug,this.chapterIndex-1])):n.key==="ArrowRight"&&(this.reLoadPage(),this.router.navigate(["/truyen",this.bookSlug,this.chapterIndex+1]))}reLoadPage(){P(this.platformId)&&(this.checkLoadingSpin=!0,window.scrollTo(0,0))}menuButton(){this.reLoadPage(),this.router.navigate(["/truyen",this.bookSlug])}};s.\u0275fac=function(e){return new(e||s)(g(K),g(z),g(D),g(N),g(A),g(L))},s.\u0275cmp=y({type:s,selectors:[["app-chapter"]],hostBindings:function(e,a){e&1&&m("keydown",function(C){return a.onKeyDown(C)},!1,I)},standalone:!0,features:[B],decls:2,vars:2,consts:[["class","d-flex justify-content-center align-items-center","style","height: 50vh;"],["class","chapter-wrapper container my-5","tabindex","0",3,"keydown",4,"ngIf"],[1,"d-flex","justify-content-center","align-items-center",2,"height","50vh"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],["tabindex","0",1,"chapter-wrapper","container","my-5",3,"keydown"],[1,"text-decoration-none",3,"routerLink"],[1,"text-center","text-success"],[1,"text-decoration-none","px-1"],[1,"text-center","text-dark"],[1,"chapter-start","container-fluid"],[1,"chapter-nav","text-center"],[1,"chapter-actions","chapter-actions-origin","d-flex","align-items-center","justify-content-center"],[1,"btn","btn-success","mt-2","mb-2","me-1","chapter-prev",3,"routerLink","click"],[1,"btn","btn-success","chapter_jump","me-1",3,"click"],["xmlns","http://www.w3.org/2000/svg","height","1em","viewBox","0 0 448 512",2,"fill","#fff"],["d","M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"],[1,"dropdown","select-chapter","me-1","d-none"],["role","button","id","dropdownMenuLink","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-secondary","dropdown-toggle"],["aria-labelledby","dropdownMenuLink",1,"dropdown-menu","select-chapter__list"],[1,"btn","btn-success","chapter-next",3,"routerLink","click"],[1,"chapter-end","container-fluid"],[1,"chapter-content","mb-3"],["class","mt-2",3,"innerHTML",4,"ngIf"],[1,"btn","btn-success","mt-2","mb-2","me-1","me-1","chapter-prev",3,"routerLink","click"],[1,"mt-2",3,"innerHTML"]],template:function(e,a){e&1&&v(0,O,4,0,"div",0)(1,Q,48,24,"div",1),e&2&&(b(0,a.chapterModel==null?0:-1),l(1),u("ngIf",a.chapterModel!=null))},dependencies:[F,j,R]});let o=s;return o})();export{ae as ChapterComponent};
