
@if (chapterModel == undefined) {
    <div class="d-flex justify-content-center align-items-center" style="height: 50vh;">
        <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Loading...</span>
        </div>
    </div>
}
<div *ngIf="chapterModel != undefined" class="chapter-wrapper container my-5">
    <a [routerLink]="['/truyen', bookSlug]" class="text-decoration-none">
        <h1 class="text-center text-success"> {{ chapterModel.bookTitle }} </h1>
    </a>
    <a class="text-decoration-none px-1">
        <h4 class="text-center text-dark">Chương {{chapterModel.chapNumber}}: {{chapterModel.title}}</h4>
    </a>
    <hr class="chapter-start container-fluid">
    <div class="chapter-nav text-center">
        <div class="chapter-actions chapter-actions-origin d-flex align-items-center justify-content-center">
        
            @if (chapterIndex! <= 1) {
                <a class="btn btn-success mt-2 mb-2 me-1 me-1 chapter-prev" [routerLink]="['/truyen', bookSlug]" (click)="reLoadPage()"> 
                    <span>Chương</span> trước</a>
            } @else {
                <a class="btn btn-success mt-2 mb-2 me-1 me-1 chapter-prev" [routerLink]="['/truyen', bookSlug, chineseBookId,  chapterIndex!-1]" (click)="reLoadPage()"> 
                    <span>Chương</span> trước</a>
            }
            <button class="btn btn-success chapter_jump me-1" (click)="menuButton()">
                <span>
                    <svg style="fill: #fff;" xmlns="http://www.w3.org/2000/svg" height="1em"
                        viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. -->
                        <path
                            d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z">
                        </path>
                    </svg>

                </span>
            </button>
        

            <div class="dropdown select-chapter me-1 d-none">
                <a class="btn btn-secondary dropdown-toggle" role="button"
                    id="dropdownMenuLink" data-bs-toggle="dropdown" aria-expanded="false">
                </a>

                <ul class="dropdown-menu select-chapter__list" aria-labelledby="dropdownMenuLink">

                </ul>
            </div>
            <a class="btn btn-success chapter-next" [routerLink]="['/truyen', bookSlug, chineseBookId, chapterIndex!+1]" (click)="reLoadPage()">
                <span>Chương</span> tiếp</a>
        </div>
    </div>
    <hr class="chapter-end container-fluid">

    @if (checkLoadingSpin) {
        <div class="d-flex justify-content-center align-items-center" style="height: 50vh;">
            <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
        </div>
    }

    <div class="chapter-content mb-3">
    
        <div *ngIf="!checkLoadingSpin" class="mt-2" style="font-size: 17px;" [innerHTML]="safeHtml"></div>

        <hr class="chapter-start container-fluid">
        <div class="chapter-nav text-center">
        
            <div class="chapter-actions chapter-actions-origin d-flex align-items-center justify-content-center">
            
                    @if (chapterIndex! <= 1) {
                        <a class="btn btn-success mt-2 mb-2 me-1 me-1 chapter-prev" [routerLink]="['/truyen', bookSlug]" (click)="reLoadPage()"> 
                            <span>Chương</span> trước</a>
                    } @else {
                        <a class="btn btn-success mt-2 mb-2 me-1 me-1 chapter-prev" [routerLink]="['/truyen', bookSlug, chineseBookId,  chapterIndex!-1]" (click)="reLoadPage()"> 
                            <span>Chương</span> trước</a>
                    }
                   
                    <button class="btn btn-success chapter_jump me-1" (click)="menuButton()">
                        <span>
                            <svg style="fill: #fff;" xmlns="http://www.w3.org/2000/svg" height="1em"
                                viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. -->
                                <path
                                    d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z">
                                </path>
                            </svg>
        
                        </span>
                    </button>

                <div class="dropdown select-chapter me-1 d-none">
                    <a class="btn btn-secondary dropdown-toggle" role="button" 
                        id="dropdownMenuLink" data-bs-toggle="dropdown" aria-expanded="false">
                    </a>

                    <ul class="dropdown-menu select-chapter__list" aria-labelledby="dropdownMenuLink">
                    
                    </ul>
                </div>
                <a class="btn btn-success chapter-next" [routerLink]="['/truyen', bookSlug, chineseBookId, chapterIndex!+1]" (click)="reLoadPage()">
                    <span>Chương</span> tiếp</a>
            </div>
        </div>
        <hr class="chapter-end container-fluid">
</div>

        <!-- <div class="text-center px-2 py-2 alert alert-success d-none d-lg-block" role="alert">Bạn có thể dùng phím
            mũi tên hoặc WASD để
            lùi/sang chương</div>
        </div> -->

    <!-- <div class="chapter-actions chapter-actions-mobile d-flex align-items-center justify-content-center">
        
        <a class="btn btn-success me-2 chapter-prev"
            [routerLink]="['/truyen', chapterModel?.bookSlug, chapterIndex!-1]" title=""> 
            <span>Chương</span>trước</a>
        <button class="btn btn-success chapter_jump me-2" data-story-id="3" data-slug-chapter="chuong-1"
            data-slug-story="nang-khong-muon-lam-hoang-hau"><span>
                <svg style="fill: #fff;" xmlns="http://www.w3.org/2000/svg" height="1em"
                    viewBox="0 0 448 512">
                    <path
                        d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z">
                    </path>
                </svg>
            </span></button>

        <div class="dropup select-chapter me-2 d-none">
            <a class="btn btn-secondary dropdown-toggle" role="button"
                id="dropdownMenuLink" data-bs-toggle="dropdown" aria-expanded="false">
                Chọn chương
            </a>

            <ul class="dropdown-menu select-chapter__list" aria-labelledby="dropdownMenuLink">

            </ul>
        </div>
        <a class="btn btn-success chapter-next" [routerLink]="['/truyen', chapterModel?.bookSlug, chapterIndex!+1]"
            title=""><span>Chương </span>tiếp</a> -->
    
    <!-- </div> -->